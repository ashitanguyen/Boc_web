@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor;
@{
    var sessionName = new Byte[20];
    bool nameOK = Context.Session.TryGetValue("Username", out sessionName);
    var sessionToken = @HttpContextAccessor.HttpContext.Session.GetString("Token");



}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <title>BOC Page</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="/css/vendors/bootstrap.min.css" />
    <link href="/css/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/css/jquery.dataTables.min.css">
    <!-- Font Awesome -->
    <link href="~/fonts/font-awesome-4.7.0/css/font-awesome.css" rel="stylesheet" />
    <!-- NProgress -->
    <link href="/css/vendors/nprogress.css" rel="stylesheet" />
    <!-- iCheck -->
    <link href="/css/vendors/green.css" rel="stylesheet" />

    <!-- bootstrap-progressbar -->
    <link href="/css/vendors/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet">
    <!-- JQVMap -->
    <link href="/css/vendors/jqvmap.min.css" rel="stylesheet" />
    <!-- bootstrap-daterangepicker -->
    <link href="/css/vendors/daterangepicker.css" rel="stylesheet" />
    <!-- Custom Theme Style -->
    <link href="/css/custom.min.css" rel="stylesheet" />
    <!-- Jquery -->
    <link href="/css/vendors/multiselect.css" rel="stylesheet" />
    <!-- Alertify -->
    <link href="/css/alertify.css" rel="stylesheet">
    <!--DexExpress-->
    <link href="~/css/devextreme/dx.common.css" rel="stylesheet" />
    <link href="~/css/devextreme/dx.light.css" rel="stylesheet" />

    <!-- Dev Express -->
    @*<script src="~/js/devextreme/jquery.js"></script>
        <script src="~/js/devextreme/dx.all.js"></script>
        <script src="~/js/devextreme/aspnet/dx.aspnet.mvc.js"></script>
        <script src="~/js/devextreme/aspnet/dx.aspnet.data.js"></script>*@
    <script src="~/js/vendor.js" asp-append-version="true"></script>
    <script type="text/javascript">
        function makeTableScroll() {
            // Constant retrieved from server-side via JSP
            var maxRows = 10;

            var table = document.getElementById('tableBagHS');
            if (table != null) {
                var wrapper = table.parentNode;
                var rowsInTable = table.rows.length;
                var height = 0;
                if (rowsInTable > maxRows) {
                    for (var i = 0; i < maxRows; i++) {
                        height += table.rows[i].clientHeight;
                    }
                    wrapper.style.height = height + "px";
                }
            }
        }
    </script>


    <style>

        #back2Top {
            width: 40px;
            line-height: 40px;
            overflow: hidden;
            z-index: 999;
            display: none;
            cursor: pointer;
            -moz-transform: rotate(270deg);
            -webkit-transform: rotate(270deg);
            -o-transform: rotate(270deg);
            -ms-transform: rotate(270deg);
            transform: rotate(270deg);
            position: fixed;
            bottom: 50px;
            right: 0;
            background-color: #DDD;
            color: #555;
            text-align: center;
            font-size: 30px;
            text-decoration: none;
        }

            #back2Top:hover {
                background-color: #DDF;
                color: #000;
            }


        /*  .dx-item {
                width: 180px;
            }*/

        .container {
            height: 1024px !important;
        }

        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            background-color: #28A745;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            text-align: center;
        }

            .sidenav a {
                padding: 8px 8px 8px 32px;
                text-decoration: none;
                font-size: 25px;
                color: #ffffff;
                display: block;
                transition: 0.3s;
            }

                .sidenav a:hover {
                    color: #006BB8;
                }

            .sidenav .closebtn {
                position: absolute;
                top: 0;
                right: 25px;
                font-size: 36px;
                margin-left: 50px;
            }
        /* Fix hedaer and footer
            #fixed-header, #fixed-footer {
                width: 88%;
                position: fixed;
                padding: -1px 0;
            }

            #fixed-header {
                top: 0;
            }

            #fixed-footer {
                bottom: 0;
            }*/

    </style>
</head>

<body class="nav-md" onload="makeTableScroll();">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col" id="leftposition" style="position: fixed!important;">
                <div class="left_col scroll-view">
                    <div class="navbar nav_title" style="border:0;margin-top:-10px;">
                        <a href="/Boc/Index" class="site_title"><i class="fa fa-plane" aria-hidden="true"></i> <span>BOC Page</span></a>
                    </div>
           

                    <div class="clearfix"></div>

                    <!-- menu profile quick info -->
                    <div class="profile clearfix">
                        <div class="profile_pic">
                            <img src="/images/img.jpg" alt="admin" class="img-circle profile_img" />
                        </div>

                        <div class="profile_info">
                            @if (nameOK)
                            {
                                string result = System.Text.Encoding.UTF8.GetString(sessionName);
                                <span>Welcome,</span>
                                <h2>@result</h2>


                            }

                        </div>

                    </div>
                    <!-- /menu profile quick info -->

                    <br />

                    <!-- sidebar menu -->
                    <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                        <div class="menu_section" style="position:fixed!important;">
                            <div style="padding:2px;">
                                <div id="menu" style="color:#FFFFFF"></div>
                            </div>
                            <ul class="nav side-menu">

                                <li>
                                    <div id="menu" style="color:#FFFFFF;"></div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- /sidebar menu -->
                    <!-- /menu footer buttons -->
                    <div class="sidebar-footer hidden-small">
                        <a data-toggle="tooltip" data-placement="top" href="/ChangePass/Index" title="Change Password">
                            @*<span class="glyphicon glyphicon-cog" aria-hidden="true"></span>*@
                            <img src="~/images/changepass.png" width="15" height="15" />
                        </a>
                        <a data-toggle="tooltip" data-placement="top" onclick="openFullscreen();" title="FullScreen">
                            @*<span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>*@
                            <img src="~/images/fullscreen.png" width="15" height="15" />
                        </a>
                        <a data-toggle="tooltip" data-placement="top" onclick="closeFullscreen();" title="Lock">
                            @*<span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>*@
                            <img src="~/images/lock.png" width="15" height="15" />
                        </a>
                        <a data-toggle="tooltip" data-placement="top" id="logout" title="Logout">
                            @*<span class="glyphicon glyphicon-off" aria-hidden="true"></span>*@
                            <img src="~/images/logout.png" width="20" height="15" />
                        </a>
                    </div>
                    <!-- /menu footer buttons -->
                </div>
            </div>
            <input type="hidden" value="@sessionToken" id="token" /> @*Luu lai Token su dung cho ben BagMiss(neu nhan vien lam ho khach)*@
            <div id="mySidenav" class="sidenav" style="position: fixed!important;float:left;">

                <a href="." class="site_title"><i class="fa fa-plane" aria-hidden="true"></i> <span>BOC Menu</span></a>
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <div id="dynamicMenu" style="color:#FFFFFF;font-family:Tahoma;font-size:larger;float:left!important;text-align:left;"></div>

                <script>

                  let array = [];
                  $.ajax({
                                            url: '@Url.Action("Menu", "Boc")',
                                            type: "get",
                                            dataType: "json",
                                            success: function (response) {
                                                array = response;

                                                new DevExpress.ui.dxTreeView(document.getElementById("dynamicMenu"), {


                                                    "dataSource": array,

                                                    onItemClick: function (e) {

                                                        var node = e.node.key;
                                                        switch (node) {
                                                            case "BL_FLIGHTVIEW_HAN":
                                                                return window.location.href = "/Lounge/Airport";
                                                                break;
                                                            case "FLIGHT_DATE":
                                                                return window.location.href = "/FlightDate/Index";
                                                                break;
                                                            case "FO_DOC_READER":
                                                                return window.location.href = "/FO_DOC_READER/Index";
                                                                break;
                                                            case "BAGHS_FOUND":
                                                                return window.location.href = "/bagfoundext/Index";
                                                                break;
                                                            case "BAGHS_MISS":
                                                                /*Lưu localStorage token của staff*/
                                                                var station_token = $('#token').val();
                                                                localStorage.setItem('Token', station_token);
                                                                return window.location.href = "/BaggageMiss?UserCurrent=Yes";
                                                                break;
                                                            case "IOS_BOC":
                                                                return window.open("https://testflight.apple.com/join/SAElif2I", "_blank");
                                                                break;
                                                            case "RPT_GO_1":
                                                                return window.location.href = "/Report/Report1";
                                                            case "RPT_LOADFACTOR_ROUTE":
                                                                return window.location.href = "/Report/Report2";
                                                                break;
                                                            case "FLIGHT_REPORT_GO":
                                                                return window.location.href = "/Report/Report3";
                                                                break;
                                                        }

                                                    },


                                                });

                                            }
             });


                </script>
                <script>
                    /*Hàm lấy query string trên url */
                    function getParameterByName(name) {
                        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
                        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                            results = regex.exec(location.search);
                        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                    }
                </script>
            </div>
            <!-- top navigation -->
            <div class="top_nav" id="navtop" style="position: relative; z-index: 99;">
                <div class="nav_menu" id="fixed-header">
                    <nav class="nav navbar-nav" style="height:47px;">
                        <div class="nav toggle">
                            <a id="menu_toggle" onclick="openNav()"><i class="fa fa-bars"></i></a>
                        </div>                       

                        <ul class=" navbar-right">
                            <li class="nav-item dropdown open">
                                <a href="javascript:;" class="user-profile dropdown-toggle" aria-haspopup="true" id="navbarDropdown" data-toggle="dropdown" aria-expanded="false" style="margin-top:25px!important;margin-right:25px!important">
                                    <img src="/images/img.jpg" alt="">
                                    @if (nameOK)
                                    {
                                        string name = System.Text.Encoding.UTF8.GetString(sessionName);

                                        @name


                                    }
                                </a>
                                <div class="dropdown-menu dropdown-usermenu pull-right" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="javascript:;"> Profile</a>
                                    <a class="dropdown-item" href="javascript:;">
                                        <span class="badge bg-red pull-right">50%</span>
                                        <span>Settings</span>
                                    </a>
                                    <a class="dropdown-item" href="javascript:;">Help</a>
                                    <a class="dropdown-item" href="/ChangePass/Index"> Change Password&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;<i class="fa fa-key" aria-hidden="true"></i></a>
                                    <a class="dropdown-item" href="/Home/Index"><i class="fa fa-sign-out pull-right"></i> Log Out</a>

                                </div>
                            </li>

                            @*<li role="presentation" class="nav-item dropdown open">
                <a href="javascript:;" class="dropdown-toggle info-number" id="navbarDropdown1" data-toggle="dropdown" aria-expanded="false">
                    <i class="fa fa-envelope-o"></i>
                    <span class="badge bg-green">6</span>
                </a>
                <ul class="dropdown-menu list-unstyled msg_list" role="menu" aria-labelledby="navbarDropdown1">
                    <li class="nav-item">
                        <a class="dropdown-item">
                            <span class="image"><img src="/images/img.jpg" alt="Profile Image" /></span>
                            <span>
                                <span>Admin</span>
                                <span class="time">3 mins ago</span>
                            </span>
                            <span class="message">
                                Film festivals used to be do-or-die moments for movie makers. They were where...
                            </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="dropdown-item">
                            <span class="image"><img src="/images/img.jpg" alt="Profile Image" /></span>
                            <span>
                                <span>John Smith</span>
                                <span class="time">3 mins ago</span>
                            </span>
                            <span class="message">
                                Film festivals used to be do-or-die moments for movie makers. They were where...
                            </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="dropdown-item">
                            <span class="image"><img src="/images/img.jpg" alt="Profile Image" /></span>
                            <span>
                                <span>John Smith</span>
                                <span class="time">3 mins ago</span>
                            </span>
                            <span class="message">
                                Film festivals used to be do-or-die moments for movie makers. They were where...
                            </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="dropdown-item">
                            <span class="image"><img src="/images/img.jpg" alt="Profile Image" /></span>
                            <span>
                                <span>John Smith</span>
                                <span class="time">3 mins ago</span>
                            </span>
                            <span class="message">
                                Film festivals used to be do-or-die moments for movie makers. They were where...
                            </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <div class="text-center">
                            <a class="dropdown-item">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </div>
                    </li>
                </ul>
            </li>*@
                        </ul>
                    </nav>
                </div>
            </div>
            <!-- /top navigation -->
            <!-- page content -->
            <div class="right_col" id="noidung"  role="main">
                @RenderBody()
            </div>
            
            <script>
                var getHomeAction = "@Url.Action("Index","Home")";
                if (getHomeAction == "/")
                    getHomeAction = "";
                var _subFolder = getHomeAction;
            </script>
            <!-- /page content -->
            <!-- footer content -->
            <footer>
                <div class="pull-right">
                    &copy; @DateTime.Now.Year -  <a href="https://www.bambooairways.com/">Bamboo Airways</a>
                </div>
                <div class="clearfix"></div>
            </footer>
            <!-- /footer content -->
            <a id="back2Top" title="Back to top" href="#">&#10148;</a>      
    </div>
</div>
    <script>
        function openNav() {
            document.getElementById("mySidenav").style.width = "100%";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }
        function closeMenu() {
           
            //document.getElementById("leftposition").style.width = "0";
            //document.getElementById("mySidenav").style.width = "0";
            //document.getElementById("navtop").style.width = "0";
            //document.getElementById("noidung").style.width = "100%";
            //document.getElementById("noidung").style.zIndex = 9999;
        }
    </script>
    <script>
        // When the user scrolls the page, execute myFunction
        window.onscroll = function () { myFunction() };

        // Get the header
        var header = document.getElementById("fixed-header");

        // Get the offset position of the navbar
        var sticky = header.offsetTop;

        // Add the sticky class to the header when you reach its scroll position. Remove "sticky" when you leave the scroll position
        function myFunction() {
            if (window.pageYOffset > sticky) {
                header.classList.add("sticky");
            } else {
                header.classList.remove("sticky");
            }
        }




    </script>
    <script>
        $(document).ready(function () {
            //Back to top when user scroll
            $(window).scroll(function () {
                if ($(this).scrollTop()) {
                    $('#back2Top').fadeIn();
                } else {
                    $('#back2Top').fadeOut();
                }
            });
            
            $("#back2Top").click(function () {
                //1 second of animation time
                //html works for FFX but not Chrome
                //body works for Chrome but not FFX
                //This strange selector seems to work universally
                $("html, body").animate({ scrollTop: 0 }, 1000);
            });

                      
            $("#logout").on('touchstart click', function (e) {
                e.preventDefault();
                var href = _subFolder ;
                alertify.confirm("Are you sure?", function (e) {
                    if (e) {
                        window.location.href = href;
                    }
                });
            });
            //Call ajax to bind menu
                let array = [];
                  $.ajax({
                                            url: '@Url.Action("Menu", "Boc")',
                                            type: "get",
                                            dataType: "json",
                                            success: function (response) {
                                                array = response;

                                                new DevExpress.ui.dxTreeView(document.getElementById("menu"), {


                                                    "dataSource": array,
                                                    onItemClick: function (e) {

                                                        var node = e.node.key;
                                                        switch (node) {
                                                            case "BL_FLIGHTVIEW_HAN":
                                                                return window.location.href = "/Lounge/Airport";
                                                                break;
                                                            case "FLIGHT_DATE":
                                                                return window.location.href = "/FlightDate/Index";
                                                                break;
                                                            case "FO_DOC_READER":
                                                                return window.location.href = "/FO_DOC_READER/Index";
                                                                break;
                                                            case "BAGHS_FOUND":
                                                                return window.location.href = "/bagfoundext/Index";
                                                                break;
                                                            case "BAGHS_MISS":
                                                                /*Lưu localStorage token của staff*/
                                                                var station_token = $('#token').val();
                                                                localStorage.setItem('Token', station_token);
                                                                return window.location.href = "/BaggageMiss?UserCurrent=Yes";
                                                                break;
                                                            case "IOS_BOC":
                                                                return window.open("https://testflight.apple.com/join/SAElif2I", "_blank");
                                                                break;
                                                            case "RPT_GO_1":
                                                                return window.location.href = "/Report/Report1";
                                                            case "RPT_LOADFACTOR_ROUTE":
                                                                return window.location.href = "/Report/Report2";
                                                                break;
                                                            case "FLIGHT_REPORT_GO":
                                                                return window.location.href = "/Report/Report3";
                                                                break;
                                                        }

                                                    },


                                                });

                                            }
             });


        });
    </script>
    <script>
        /* View in fullscreen */
        function openFullscreen() {
            var elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
            }
        }
        /* Close fullscreen */
        function closeFullscreen() {
            var elem = document.documentElement;
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
            }
        }</script>

    <!-- Jquey -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery-3.5.1.min.js"></script>
    <!-- Alertify -->
    <script src="/js/alertify.js"></script>
    <!-- Include Bootstrap Datepicker -->
    <script src="/js/bootstrap-datepicker.min.js"></script>
    <!-- Bootstrap -->
    <script src="/js/bootstrap.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <!-- FastClick -->
    <script src="/js/fastclick.js"></script>
    <!-- NProgress -->
    <script src="/js/nprogress.js"></script>
    <!-- Chart.js -->
    <script src="/js/Chart.min.js"></script>
    <!-- gauge.js -->
    <script src="/js/gauge.min.js"></script>
    <!-- bootstrap-progressbar -->
    <script src="/js/bootstrap-progressbar.min.js"></script>
    <!-- iCheck -->
    <script src="/js/icheck.min.js"></script>
    <!-- Skycons -->
    <script src="/js/skycons.js"></script>
    <!-- Flot -->
    <script src="/js/jquery.flot.js"></script>
    <script src="/js/jquery.flot.pie.js"></script>
    <script src="/js/jquery.flot.time.js"></script>
    <script src="/js/jquery.flot.stack.js"></script>
    <script src="/js/jquery.flot.resize.js"></script>
    <!-- Flot plugins -->
    <script src="/js/jquery.flot.orderBars.js"></script>
    <script src="/js/jquery.flot.spline.min.js"></script>
    <script src="/js/curvedLines.js"></script>
    <!-- DateJS -->
    <script src="/js/date.js"></script>
    <!-- JQVMap -->
    <script src="/js/jquery.vmap.js"></script>
    <script src="/js/jquery.vmap.world.js"></script>
    <script src="/js/jquery.vmap.sampledata.js"></script>
    <!-- bootstrap -->
    <script src="/js/moment.min.js"></script>
    <script src="/js/daterangepicker.js"></script>

    <!-- Custom Theme Scripts -->
    @*<script src="/js/custom.min.js"></script>*@
    <!-- Selector multi Scripts -->
    <script src="/js/helper.js"></script>
    <script src="/js/multiselect.min.js"></script>

    <!-- For Export -->
    <script src="/js/html2canvas.min.js"></script>
    <script src="/js/jquery.cookie.js"></script>
    <!-- For Paging -->
    <link rel="stylesheet" type="text/css" href="/css/jquery.dataTables.min.css">
    <script src="/js/jquery.dataTables.min.js"></script>

</body>
</html>
